Version 1
SubGoalCombiner SGC_AND
INITSECTION
ProcTriggerRegisterForPlayers(S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035);
ProcTriggerRegisterForPlayers(S_RC_DW_CheckpointPassed_6d26d935-4dc3-4aa7-a605-a6e8f196e9ce);
ProcTriggerRegisterForPlayers(S_RC_DW_CheckpointUnpassed_6d06f576-eb5d-4b6a-a1b6-526dc56b558a);

DB_RC_DW_BridgeGuards((CHARACTERGUID)CHARACTERGUID_S_RC_DW_Checkpoint_Magister_1_3137b5cc-f568-4f0b-9239-23accfdf8a5c, "RC_DW_SeenCheckpointMagister_1", "RC_DW_Checkpoint_Magister_1");
DB_RC_DW_BridgeGuards((CHARACTERGUID)CHARACTERGUID_S_RC_DW_Checkpoint_Magister_2_87a2ef8c-979e-4a64-aaef-46d319beb384, "RC_DW_SeenCheckpointMagister_2", "RC_DW_Checkpoint_Magister_2");
DB_RC_DW_BridgeMonks(CHARACTERGUID_RC_DW_CheckpointMonk1_56e943fb-f5c6-4ff2-8069-d564205a6c37);
DB_RC_DW_BridgeMonks(CHARACTERGUID_RC_DW_CheckpointMonk2_39ed47a5-28a7-4ae4-afca-22b25a26b8dd);

DB_Dialogs(CHARACTERGUID_S_RC_DW_IdlingMagister_1_8bd90c2c-80ae-457c-b97c-8b5a3f38bdab, "RC_DW_IdlingMagister_1");
DB_Dialogs(CHARACTERGUID_S_RC_DW_IdlingMagister_2_1c43bb96-658e-4c7a-8224-82cafce97458, "RC_DW_IdlingMagister_2");

DB_DontCreateMurder(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_1_3137b5cc-f568-4f0b-9239-23accfdf8a5c);
DB_DontCreateMurder(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_2_87a2ef8c-979e-4a64-aaef-46d319beb384);
ProcTriggerRegisterForPlayers(TRIGGERGUID_S_RC_DW_CheckpointSpotTrigger_65025baf-5c76-49e1-9ae1-b5f85e571a73);

DB_OneShotPlayerTrigger(S_RC_DW_DriftwoodArriveAD_c1f658f8-f0fb-435f-98fa-66753ab2dd02);
DB_RC_DW_CareAboutWrit3Sp("RC_DW_CheckpointGuards");

DB_Dialogs(CHARACTERGUID_S_RC_DW_CheckpointMonk1_56e943fb-f5c6-4ff2-8069-d564205a6c37, "RC_DW_CheckPointMonk_01");
DB_Dialogs(CHARACTERGUID_S_RC_DW_CheckpointMonk2_39ed47a5-28a7-4ae4-afca-22b25a26b8dd, "RC_DW_CheckPointMonk_02");
KBSECTION
//REGION Crossing the bridge
/*IF
CharacterEnteredTrigger(_Player,S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035)
AND
NOT QRY_RC_DW_AllowedInVillage(_Player)
AND
DB_IsPlayer(_Player)
THEN
DB_RC_DW_PlayerCrossBridge(_Player,TRIGGERGUID_S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035);
CharacterRegisterCrime(_Player,"DW_CrossBridge",TRIGGERGUID_S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035,NULL_00000000-0000-0000-0000-000000000000,0);*/

QRY
QRY_RC_DW_AllowedInVillage((CHARACTERGUID)_Player)
AND
PartyGetFlag(_Player, "RC_DW_CheckpointPassed", 1)
THEN
DB_NOOP(1);

QRY
QRY_RC_DW_AllowedInVillage((CHARACTERGUID)_Player)
AND
ObjectGetFlag(_Player, "RC_DW_CheckpointCrossed", 1)
AND
ObjectGetFlag(_Player, "RC_DW_CheckPointGuards_NoPassage", 0)
THEN
DB_NOOP(1);

IF
CharacterEnteredTrigger(_Player,S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035)
AND
ObjectGetFlag(_Player, "RC_DW_CheckpointCrossed", 1)
AND
ObjectGetFlag(_Player, "RC_DW_CheckPointGuards_NoPassage", 0)
THEN
DB_RC_DW_SnuckIntoDriftwood(_Player);


/*IF
CharacterLeftTrigger(_Player,S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035)
THEN
CharacterStopCrime(_Player,"DW_CrossBridge",TRIGGERGUID_S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035);
NOT DB_RC_DW_PlayerCrossBridge(_Player,TRIGGERGUID_S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035);

IF
DialogEnded("RC_DW_Warning_CrossBridge",_ID)
AND
DialogGetInvolvedPlayer(_ID,1,_FirstPlayer)
AND
DB_DialogPlayers(_ID,_Player,_)
AND
DB_RC_DW_PlayerCrossBridge((CHARACTERGUID)_Player,TRIGGERGUID_S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035)
AND
ObjectGetFlag(_FirstPlayer,"TeleportOutOfTrespass",1)
THEN
ObjectClearFlag(_FirstPlayer,"TeleportOutOfTrespass",0);
PROC_RC_DW_CheckPointExpel(_Player);

PROC
PROC_RC_DW_CheckPointExpel((CHARACTERGUID)_Player)
AND
DB_IsPlayer(_OtherPlayer)
AND
ObjectGetFlag(_OtherPlayer, "RC_DW_CheckpointPassed", 1)
AND
CharactersAreGrouped(_Player, _OtherPlayer, 1)
THEN
CharacterDetachFromGroup(_OtherPlayer);

PROC
PROC_RC_DW_CheckPointExpel((CHARACTERGUID)_Player)
THEN
TeleportTo(_Player,S_RC_DW_CheckpointExpel_03b6f029-889b-49bf-ab50-ff5f39b08567);
NOT DB_RC_DW_PlayerCrossBridge(_Player,TRIGGERGUID_S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035);*/

IF
ObjectFlagSet("RC_DW_CheckpointPassed", _Player, _)
THEN
TriggerUnregisterForCharacter(TRIGGERGUID_S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035, (CHARACTERGUID)_Player);

IF
CharacterEnteredTrigger(_Player, S_RC_DW_CheckpointPassed_6d26d935-4dc3-4aa7-a605-a6e8f196e9ce)
THEN
ObjectSetFlag(_Player, "RC_DW_CheckpointCrossed");

IF
CharacterEnteredTrigger(_Player, S_RC_DW_CheckpointPassed_6d26d935-4dc3-4aa7-a605-a6e8f196e9ce)
AND
PartyGetFlag(_Player, "RC_DW_CheckpointPassed", 1)
THEN
PartySetFlag(_Player, "RC_DW_CheckpointPassed", 0);

IF
CharacterEnteredTrigger(_Player, TRIGGERGUID_S_RC_DW_CheckpointTrespass_750e5f8a-aaca-4994-b748-d5ea6f55f035)
AND
PartyGetFlag(_Player, "RC_DW_CheckpointPassed", 1)
THEN
PartySetFlag(_Player, "RC_DW_CheckpointPassed", 0);

/*IF
CharacterEnteredTrigger(_Player, S_RC_DW_CheckpointPassed_6d26d935-4dc3-4aa7-a605-a6e8f196e9ce)
AND
PartyGetFlag(_Player, "RC_DW_CheckpointPassed", 0)
AND
QueryOnlyOnce("RC_DW_AD_SnuckPastCheckpoint")
THEN
Proc_StartDialog(1, "RC_DW_AD_SnuckPastCheckpoint", _Player);*/

IF
CharacterLeftTrigger(_Player, S_RC_DW_CheckpointUnpassed_6d06f576-eb5d-4b6a-a1b6-526dc56b558a)
AND
QRY_AnyRegionActive()
AND
NOT DB_RC_DW_SnuckIntoDriftwood(_Player)
THEN
ObjectClearFlag(_Player, "RC_DW_CheckpointCrossed", 0);

//END_REGION

//REGION Dialogue logic
IF
DB_RC_DW_BridgeGuards(_Guard, _, _Dialog)
THEN
SetHasDialog(_Guard, 1);
DB_RC_DW_CareAboutWrit2Sp(_Dialog);

IF
StoryEvent(_Player, _Event)
AND
DB_RC_DW_BridgeGuards(_Guard, _Event, _)
AND
PartyGetFlag((CHARACTERGUID)_Player, "RC_DW_CheckpointPassed", 0)
AND
PartyGetFlag((CHARACTERGUID)_Player, "RC_DW_CheckpointCrossed", 0)
AND
ObjectGetFlag((CHARACTERGUID)_Player, "RC_DW_MetCheckpointGuards", 0)
THEN
PROC_RC_DW_CheckpointDialog((CHARACTERGUID)_Player, _Guard);

PROC
PROC_GLOBAL_DialogStartRequested(_Guard, _Player)
AND
DB_RC_DW_BridgeGuards((CHARACTERGUID)_Guard, _, _)
THEN
PROC_RC_DW_CheckpointDialog((CHARACTERGUID)_Player, _Guard);

PROC
PROC_RC_DW_CheckpointDialog((CHARACTERGUID)_Player, (CHARACTERGUID)_Guard)
AND
DB_RC_DW_BridgeGuards(_Guard2, _, _)
AND
_Guard != _Guard2
AND
QRY_SpeakerIsAvailableAndInDialogRange(_Guard2, _Guard)
AND
NOT QRY_RC_DW_AllowedInVillage(_Player)
AND
ObjectGetFlag(_Player, "RC_DW_MetCheckpointGuards", 0)
THEN
Proc_StartDialog(0, "RC_DW_CheckpointGuards", CHARACTERGUID_S_RC_DW_Checkpoint_Magister_2_87a2ef8c-979e-4a64-aaef-46d319beb384, CHARACTERGUID_S_RC_DW_Checkpoint_Magister_1_3137b5cc-f568-4f0b-9239-23accfdf8a5c, _Player);

PROC
PROC_RC_DW_CheckpointDialog((CHARACTERGUID)_Player, (CHARACTERGUID)_Guard)
AND
DB_RC_DW_BridgeGuards(_Guard2, _, _)
AND
_Guard != _Guard2
AND
NOT QRY_SpeakerIsAvailableAndInDialogRange(_Guard2, _Guard)
AND
DB_RC_DW_BridgeGuards(_Guard, _, _Dialog)
THEN
Proc_StartDialog(0, _Dialog, _Guard, _Player);

PROC
PROC_RC_DW_CheckpointDialog((CHARACTERGUID)_Player, (CHARACTERGUID)_Guard)
AND
DB_RC_DW_BridgeGuards(_Guard2, _, _)
AND
_Guard != _Guard2
AND
QRY_SpeakerIsAvailableAndInDialogRange(_Guard2, _Guard)
AND
QRY_RC_DW_AllowedInVillage(_Player)
AND
DB_RC_DW_BridgeGuards(_Guard, _, _Dialog)
THEN
Proc_StartDialog(0, _Dialog, _Guard, _Player);

PROC
PROC_RC_DW_CheckpointDialog((CHARACTERGUID)_Player, (CHARACTERGUID)_Guard)
AND
DB_RC_DW_BridgeGuards(_Guard2, _, _)
AND
_Guard != _Guard2
AND
QRY_SpeakerIsAvailableAndInDialogRange(_Guard2, _Guard)
AND
NOT QRY_RC_DW_AllowedInVillage(_Player)
AND
ObjectGetFlag(_Player, "RC_DW_MetCheckpointGuards", 1)
AND
DB_RC_DW_BridgeGuards(_Guard, _, _Dialog)
THEN
Proc_StartDialog(0, _Dialog, _Guard, _Player);
//END_REGION

//REGION Spotting PCs
IF
CharacterLeftTrigger(_, TRIGGERGUID_S_RC_DW_CheckpointSpotTrigger_65025baf-5c76-49e1-9ae1-b5f85e571a73)
AND
QRY_AnyRegionActive()
AND
NOT DB_InRegion(_,TRIGGERGUID_S_RC_DW_CheckpointSpotTrigger_65025baf-5c76-49e1-9ae1-b5f85e571a73)
THEN
GlobalSetFlag("RC_DW_CheckpointMagister_RestartSpotting");

IF
ObjectFlagSet("RC_DW_CheckpointPassed", _Player, _)
THEN
TriggerUnregisterForCharacter(TRIGGERGUID_S_RC_DW_CheckpointSpotTrigger_65025baf-5c76-49e1-9ae1-b5f85e571a73, (CHARACTERGUID)_Player);
//END_REGION

//REGION Involvement Idling Magisters
IF
DB_Dead(_Magister)
AND
DB_RC_DW_BridgeGuards(_Magister, _, _)
THEN
PROC_FTJ_SW_TrySendIdlingMagisters();

IF
DB_Dead(_Monk)
AND
DB_RC_DW_BridgeMonks(_Monk)
THEN
PROC_FTJ_SW_TrySendIdlingMagisters();

PROC
Proc_ObjectLeftCombat(_Monk,_)
AND
DB_RC_DW_BridgeMonks(_Monk)
THEN
PROC_FTJ_SW_TrySendIdlingMagisters();

PROC
PROC_FTJ_SW_TrySendIdlingMagisters()
AND
NOT DB_CombatCharacters(CHARACTERGUID_RC_DW_CheckpointMonk1_56e943fb-f5c6-4ff2-8069-d564205a6c37, _)
AND
NOT DB_CombatCharacters(CHARACTERGUID_RC_DW_CheckpointMonk2_39ed47a5-28a7-4ae4-afca-22b25a26b8dd, _)
AND
DB_Dead(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_1_3137b5cc-f568-4f0b-9239-23accfdf8a5c)
AND
DB_Dead(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_2_87a2ef8c-979e-4a64-aaef-46d319beb384)
AND
QueryOnlyOnce("RC_DW_CheckpointMagistersDead")
THEN
SetVarFixedString(CHARACTERGUID_S_RC_DW_IdlingMagister_1_8bd90c2c-80ae-457c-b97c-8b5a3f38bdab, "currentState", "State_GoToCheckPoint");
SetVarFixedString(CHARACTERGUID_S_RC_DW_IdlingMagister_2_1c43bb96-658e-4c7a-8224-82cafce97458, "currentState", "State_GoToCheckPoint");
TriggerRegisterForCharacter(TRIGGERGUID_S_RC_DW_IdlingMagistersOutsideBridge_ee1dffba-e9ba-4d15-b454-d8033c121e9d, CHARACTERGUID_S_RC_DW_IdlingMagister_1_8bd90c2c-80ae-457c-b97c-8b5a3f38bdab);
TriggerRegisterForCharacter(TRIGGERGUID_S_RC_DW_IdlingMagistersOutsideBridge_ee1dffba-e9ba-4d15-b454-d8033c121e9d, CHARACTERGUID_S_RC_DW_IdlingMagister_2_1c43bb96-658e-4c7a-8224-82cafce97458);

IF
StoryEvent((CHARACTERGUID)_Character, "RC_DW_IdlingMagisters_Pop")
THEN
SetOnStage(_Character, 0);
CharacterAppearOutOfSightToObject(_Character, S_RC_DW_IdlingMagisters_Waypoint2_05387386-fa98-4c0e-8aaf-f719d2252205, S_RC_DW_IdlingMagisters_Waypoint_47117d24-5a05-4fa7-8947-01fa24ee99d4, 0, "");

IF
CharacterEnteredTrigger(_Magister, TRIGGERGUID_S_RC_DW_IdlingMagistersOutsideBridge_ee1dffba-e9ba-4d15-b454-d8033c121e9d)
THEN
CharacterSetReactionPriority(_Magister, "Opening_Bridge", 0);
TriggerUnregisterForCharacter(TRIGGERGUID_S_RC_DW_IdlingMagistersOutsideBridge_ee1dffba-e9ba-4d15-b454-d8033c121e9d, _Magister);

IF
AutomatedDialogEnded("RC_DW_AD_IdlingMagisters_DeadCheckpoint_Alone", _)
THEN
PROC_RC_DW_IdlingMagisterCheckpointADOver();

IF
AutomatedDialogEnded("RC_DW_AD_IdlingMagisters_DeadCheckpoint", _)
THEN
PROC_RC_DW_IdlingMagisterCheckpointADOver();

IF
StoryEvent(_, "RC_DW_IdlingMagistersLostCheckpointMagisters")
THEN
PROC_RC_DW_IdlingMagisterCheckpointADOver();

PROC
PROC_RC_DW_IdlingMagisterCheckpointADOver()
THEN
TriggerRegisterForCharacter(TRIGGERGUID_S_RC_DW_IdlingMagistersInsideBridge_700c177b-c5b6-415c-a6fc-9428532de82f, CHARACTERGUID_S_RC_DW_IdlingMagister_1_8bd90c2c-80ae-457c-b97c-8b5a3f38bdab);
TriggerRegisterForCharacter(TRIGGERGUID_S_RC_DW_IdlingMagistersInsideBridge_700c177b-c5b6-415c-a6fc-9428532de82f, CHARACTERGUID_S_RC_DW_IdlingMagister_2_1c43bb96-658e-4c7a-8224-82cafce97458);
SetVarObject(CHARACTERGUID_S_RC_DW_CheckpointMonk1_56e943fb-f5c6-4ff2-8069-d564205a6c37, "Trigger", TRIGGERGUID_S_RC_DW_MonkTrigger1B_dc694eb7-3c1b-42c4-90c5-2281038c5f12);
SetVarObject(CHARACTERGUID_S_RC_DW_CheckpointMonk2_39ed47a5-28a7-4ae4-afca-22b25a26b8dd, "Trigger", TRIGGERGUID_S_RC_DW_MonkTrigger2B_540bfffb-8bcd-408d-a308-d9566d9b77ef);

IF
CharacterEnteredTrigger(_Magister, TRIGGERGUID_S_RC_DW_IdlingMagistersInsideBridge_700c177b-c5b6-415c-a6fc-9428532de82f)
THEN
CharacterSetReactionPriority(_Magister, "Close_Bridge", 1600);
TriggerUnregisterForCharacter(TRIGGERGUID_S_RC_DW_IdlingMagistersInsideBridge_700c177b-c5b6-415c-a6fc-9428532de82f, _Magister);

IF
DialogEnded("RC_DW_IdlingMagister_1", _ID)
AND
ObjectGetFlag(CHARACTERGUID_S_RC_DW_IdlingMagister_1_8bd90c2c-80ae-457c-b97c-8b5a3f38bdab, "RC_DW_IdlingMagisters_Hostile", 1)
AND
DialogGetInvolvedPlayer(_ID, 1, _Player)
THEN
ObjectClearFlag(CHARACTERGUID_S_RC_DW_IdlingMagister_1_8bd90c2c-80ae-457c-b97c-8b5a3f38bdab, "RC_DW_IdlingMagisters_Hostile", 0);
SetFaction(CHARACTERGUID_S_RC_DW_IdlingMagister_1_8bd90c2c-80ae-457c-b97c-8b5a3f38bdab, "RC_DW_HostileIdlingMagisters");
SetFaction(CHARACTERGUID_S_RC_DW_IdlingMagister_2_1c43bb96-658e-4c7a-8224-82cafce97458, "RC_DW_HostileIdlingMagisters");
PartySetFlag((CHARACTERGUID)_Player, "RC_DW_HostileIdlingMagisters", 0);

IF
ObjectFlagSet("RC_DW_HostileIdlingMagisters", _Player, _)
THEN
ObjectClearFlag(_Player, "RC_DW_HostileIdlingMagisters", 0);
CharacterSetRelationFactionToIndivFaction("RC_DW_HostileIdlingMagisters", (CHARACTERGUID)_Player, 0);
CharacterSetRelationIndivFactionToFaction((CHARACTERGUID)_Player, "RC_DW_HostileIdlingMagisters", 0);

IF
AttackedByObject((CHARACTERGUID)_CheckpointMagister, (CHARACTERGUID)_Player,(CHARACTERGUID)_Attacker,_,_)
AND
_CheckpointMagister != _Attacker
AND
DB_RC_DW_BridgeGuards(_CheckpointMagister, _, _)
AND
CharacterIsInCombat(_Attacker, 0)
AND
CharacterIsInCombat(_CheckpointMagister, 0)
THEN
CharacterSetRelationFactionToIndivFaction("RC_DW_CheckpointMagisters", (CHARACTERGUID)_Attacker, 0);
CharacterSetRelationIndivFactionToFaction((CHARACTERGUID)_Attacker, "RC_DW_CheckpointMagisters", 0);

IF
GlobalFlagSet("RC_DW_IdlingMagistersBridgeComment")
THEN
TimerLaunch("RC_DW_IdlingMagistersBridgeComment", 10000);

IF
TimerFinished("RC_DW_IdlingMagistersBridgeComment")
THEN
GlobalClearFlag("RC_DW_IdlingMagistersBridgeComment");
//END_REGION

PROC
ProcOneShotTriggerEntered(_Player,TRIGGERGUID_S_RC_DW_DriftwoodArriveAD_c1f658f8-f0fb-435f-98fa-66753ab2dd02)
THEN
StartVoiceBark("RC_DW_VB_DriftwoodArrive",_Player);
DB_OnlyOnce("RC_DW_RD_CheckPoint");

/*IF
DialogEnded(_Dialog, _ID)
AND
DialogGetInvolvedPlayer(_ID, 1, _Player)
AND
DB_RC_DW_BridgeGuards(_, _, _Dialog)
AND
PartyGetFlag((CHARACTERGUID)_Player, "RC_DW_CheckpointPassed", 1)
AND
QueryOnlyOnce("RC_DW_RD_CheckPoint")
THEN
ProcDefineReflectionDialog("RC_DW_RD_CheckPoint",_Player);

IF
DialogEnded("RC_DW_CheckpointGuards", _ID)
AND
DialogGetInvolvedPlayer(_ID, 1, _Player)
AND
PartyGetFlag((CHARACTERGUID)_Player, "RC_DW_CheckpointPassed", 1)
AND
QueryOnlyOnce("RC_DW_RD_CheckPoint")
THEN
ProcDefineReflectionDialog("RC_DW_RD_CheckPoint",_Player);

IF
DialogEnded(_Dialog, _ID)
AND
DialogGetInvolvedPlayer(_ID, 1, _Player)
AND
DB_RC_DW_BridgeGuards(_, _, _Dialog)
AND
PartyGetFlag((CHARACTERGUID)_Player, "RC_DW_CheckpointPassed", 0)
AND
NOT DB_OnlyOnce("RC_DW_AntagonisedGuards")
AND
QueryOnlyOnce("RC_DW_RD_CheckPoint")
THEN
ProcDefineReflectionDialog("RC_DW_RD_CheckPoint",_Player);

IF
DialogEnded("RC_DW_CheckpointGuards", _ID)
AND
DialogGetInvolvedPlayer(_ID, 1, _Player)
AND
PartyGetFlag((CHARACTERGUID)_Player, "RC_DW_CheckpointPassed", 0)
AND
NOT DB_OnlyOnce("RC_DW_AntagonisedGuards")
AND
QueryOnlyOnce("RC_DW_RD_CheckPoint")
THEN
ProcDefineReflectionDialog("RC_DW_RD_CheckPoint",_Player);

IF
ObjectFlagSet("FactionHostileToIndivPlayerAfterDialog",(CHARACTERGUID)_Player,_Id)
AND
DB_DialogNPCs(_Id,_Char,_)
AND
DB_RC_DW_BridgeGuards((CHARACTERGUID)_Char, _, _)
THEN
DB_OnlyOnce("RC_DW_AntagonisedGuards");

IF
DB_CombatCharacters(_Player, _ID)
AND
DB_IsPlayer((CHARACTERGUID)_Player)
AND
DB_CombatCharacters(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_1_3137b5cc-f568-4f0b-9239-23accfdf8a5c, _ID)
AND
QueryOnlyOnce("RC_DW_RD_CheckPoint")
THEN
ProcDefineReflectionDialog("RC_DW_RD_CheckPointFight",_Player);*/

IF
CharacterDying(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_2_87a2ef8c-979e-4a64-aaef-46d319beb384)
AND
DB_CombatCharacters(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_1_3137b5cc-f568-4f0b-9239-23accfdf8a5c, _ID)
AND
DB_CombatCharacters(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_2_87a2ef8c-979e-4a64-aaef-46d319beb384, _ID)
AND
QueryOnlyOnce("RC_DW_AD_CheckpointMagisterPanic")
THEN
CharacterSetReactionPriority(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_1_3137b5cc-f568-4f0b-9239-23accfdf8a5c, "FedorPanic", 100002);
CharacterSetReactionPriority(CHARACTERGUID_S_RC_DW_Checkpoint_Magister_1_3137b5cc-f568-4f0b-9239-23accfdf8a5c, "FedorPanicInDialogue", 100003);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "ReapersCoast"
