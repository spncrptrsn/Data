Version 1
SubGoalCombiner SGC_AND
INITSECTION
DB_RC_DF_RatCurse_Counter("RC_DF_RatCurse_WallBox_01",1);
DB_RC_DF_RatCurse_Counter("RC_DF_RatCurse_WallBox_02",2);
DB_RC_DF_RatCurse_Counter("RC_DF_RatCurse_WallBox_03",3);
DB_RC_DF_RatCurse_Counter("RC_DF_RatCurse_WallBox_04",4);

ProcDeclareCounter("RC_DF_RatCurse_WallBox_01");
ProcDeclareCounter("RC_DF_RatCurse_WallBox_02");
ProcDeclareCounter("RC_DF_RatCurse_WallBox_03");
ProcDeclareCounter("RC_DF_RatCurse_WallBox_04");
KBSECTION
IF
StoryEvent((CHARACTERGUID)_Rat,"RC_DF_RatCurse_RatSpawned")
AND
QRY_GetFairRand("RC_DF_RatCurse_TriggerNum",4)
AND
DB_FairRand_ReturnVal((INTEGER)_Num)
AND
DB_RC_DF_RatCurse_Counter(_CounterName,_Num)
AND
DB_GlobalCounter(_CounterName,_Count) 
AND
_Count < 5
AND
ObjectGetFlag(_Rat,"RC_DF_RatCurse_RatTriggered",0)
THEN
PROC_RC_DF_RatCurse_RatTrigger(_Rat,_CounterName);

PROC
PROC_RC_DF_RatCurse_RatTrigger((CHARACTERGUID)_Rat,(STRING)_CounterName)
THEN
ObjectSetFlag(_Rat,_CounterName);
ObjectSetFlag(_Rat,"RC_DF_RatCurse_RatTriggered");
ProcIncreaseCounter(_CounterName);


IF
StoryEvent((CHARACTERGUID)_Rat,"RC_DF_RatCurse_RatDied")
AND
DB_RC_DF_RatCurse_Counter(_CounterName,_)
AND
ObjectGetFlag(_Rat,_CounterName,1)
THEN
ProcDecreaseCounter(_CounterName);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "ReapersCoast"
