Version 1
SubGoalCombiner SGC_AND
INITSECTION
// Names of all level travellers, for global HasMet flags (must be defined before the level traveler entries themselves,
// because there's a check for whether the name exists)
DB_GLO_LevelTravelerName(CHARACTERGUID_S_TUT_LowerDeck_LohseSongGirl1_a681c125-8493-4046-ab1f-6c2201336a22,"Trice");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,"River");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_FTJ_CapturedChild_53d4aa5c-dd91-4e12-9ca8-d66879cc6ffb,"Han");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_GLO_Tarquin_a3d0cdcc-d0b0-464d-9ad7-43b38baed620,"Tarquin");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_GLO_Almira_49b466a9-e67f-4e3c-8f66-3636ba7dd54f,"Almira");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_GLO_Mihaly_3355517b-0a92-426b-9160-54fa8507adf2,"Mihaly");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,"Gareth");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_GLO_Jahan_4d222cfd-49c8-41d3-8cb7-2a2b56232633,"Jahan");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_RC_MIL_LoneWolf1_e6a57615-aee7-46b2-927a-a089ccbfdc22,"CorbinDay");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_RC_BI_Vault_PosessedPerson_002_1bfd9e78-846f-4f24-82db-6ebb48ddc203,"PossessedKid");
DB_GLO_LevelTravelerName(ITEMGUID_S_LV_ShipHead_01cbf5c6-6d95-4397-8680-b29f0e5eac58,"LVShipHead");
DB_GLO_LevelTravelerName(ITEMGUID_S_LV_ShipHead_Assault_df338db2-f47c-4575-9baa-90a27a6e75d2,"LVShipHead");
DB_GLO_LevelTravelerName(ITEMGUID_S_LV_HoE_ShipHeadInHoE_15132297-e9b6-40ea-ad96-ab6552d3b481,"LVShipHead");
DB_GLO_LevelTravelerName(ITEMGUID_S_RC_DW_LV_ShipHead_313e5b21-283a-4d8f-a3b1-0aa23a6cd5f8,"LVShipHead");
DB_GLO_LevelTravelerName(ITEMGUID_S_CoS_LV_ShipHead_4129f1cd-a8d4-4439-837d-2fc686216cc5,"LVShipHead");
DB_GLO_LevelTravelerName(ITEMGUID_S_CoS_HoE_LV_ShipHead_a0f61554-fd78-49c2-b9dc-2c933685f026,"LVShipHead");
DB_GLO_LevelTravelerName(ITEMGUID_S_ARX_LV_HoE_ShipHead_4c82c976-c923-4fca-9955-dc41359007ae,"LVShipHead");
DB_GLO_LevelTravelerName(ITEMGUID_S_EG_LV_ShipHead_7cf50dfd-5a3d-4a1a-973e-556c22cd5a7a,"LVShipHead");

DB_GLO_LevelTravelerName(CHARACTERGUID_S_Player_RedPrince_a26a1efb-cdc8-4cf3-a7b2-b2f9544add6f,"RedPrince");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_Player_Ifan_ad9a3327-4456-42a7-9bf4-7ad60cc9e54f,"Ifan");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_Player_Lohse_bb932b13-8ebf-4ab4-aac0-83e6924e4295,"Lohse");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_Player_Beast_f25ca124-a4d2-427b-af62-df66df41a978,"Beast");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_Player_Fane_02a77f1f-872b-49ca-91ab-32098c443beb,"Fane");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_Player_Sebille_c8d55eaf-e4eb-466a-8f0d-6a9447b5b24c,"Sebille");

// Eighth god
DB_GLO_LevelTravelerName(ITEMGUID_S_GLO_EighthPromiseHelper_000_9c8c6eb9-84bb-47a6-91cb-4ef33442df06,"GodKing");
DB_GLO_LevelTravelerName(ITEMGUID_S_GLO_EighthPromiseHelper_001_50b02c8d-cf15-448e-954c-e191710b88f2,"GodKing");
DB_GLO_LevelTravelerName(ITEMGUID_S_GLO_EighthPromiseHelper_002_462bcbe6-e420-4540-be99-0ef12ed0b52f,"GodKing");
DB_GLO_LevelTravelerName(ITEMGUID_S_GLO_EighthPromiseHelper_003_2a0b76e0-adf3-4033-928a-83f0ef96e65b,"GodKing");
DB_GLO_LevelTravelerName(CHARACTERGUID_S_RC_DF_Scarecrow_3bda7938-578f-49fc-a655-50b1b24db065,"GodKing");

// The travellers must be defined in a global goal, because we need to check the trigger conditions when leaving the region
// (can't check whether character is in a trigger in another level, even if both trigger and character are global)

//TUT_Tutorial_A to FJ_FortJoy_Main
DB_GLO_LevelTraveler("FJ_FortJoy_Main",CHARACTERGUID_S_TUT_LowerDeck_LohseSongGirl1_a681c125-8493-4046-ab1f-6c2201336a22,TRIGGERGUID_S_FTJ_LohseSongGirl1_BeachTrigger_b9db1534-b334-4267-a3d0-9e6de15ab32d,"FTJ_LohseSongGirl1_Beach","State_FortJoyBeach",NULL_00000000-0000-0000-0000-000000000000,0);

//LV_HoE_Main to RC_Main
// Malady
DB_GLO_LevelTraveler("RC_Main",CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,TRIGGERGUID_S_RC_DU_RiverStartLocation_fd9878a0-b203-4846-8cf5-8f7b30bf3162,"RC_DU_VL_River","",NULL_00000000-0000-0000-0000-000000000000,0);
// Han
DB_GLO_LevelTraveler("RC_Main",CHARACTERGUID_S_FTJ_CapturedChild_53d4aa5c-dd91-4e12-9ca8-d66879cc6ffb,S_RC_DW_LV_HanDefault_Point_d5446efc-aced-43d0-8418-10325c3184ef,"RC_LV_Han","State_RC_LV",NULL_00000000-0000-0000-0000-000000000000,0);
// Gareth
DB_GLO_LevelTraveler("RC_Main",CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,S_RC_DW_LV_GarethDefault_Point_2631f870-e6c3-46d0-bc88-b580c730ccc5,"RC_LV_Gareth","State_RC_LV",NULL_00000000-0000-0000-0000-000000000000,0);
// Tarquin
DB_GLO_LevelTraveler("RC_Main",CHARACTERGUID_S_GLO_Tarquin_a3d0cdcc-d0b0-464d-9ad7-43b38baed620,S_RC_DW_LV_Tarquin_Default_Point_fa4a1588-7643-441b-aa95-4a0edad92bfb,"RC_LV_Tarquin","State_RC_LV",NULL_00000000-0000-0000-0000-000000000000,0);


// RC_Main to CoS

// Malady (always goes to CoS, can't leave RC_Main without her on the boat -> no trigger check, so it automatically works)
DB_GLO_LevelTraveler("CoS_Main",(CHARACTERGUID)CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,(TRIGGERGUID)TRIGGERGUID_S_CoS_LV_RiverDefault_Point_821c7297-3d03-460f-91ec-9394a9f89d4c,"CoS_LV_River","State_CoS_LV",(TRIGGERGUID)NULL_00000000-0000-0000-0000-000000000000,0);
// Han (also always goes to CoS)
DB_GLO_LevelTraveler("CoS_Main",CHARACTERGUID_S_FTJ_CapturedChild_53d4aa5c-dd91-4e12-9ca8-d66879cc6ffb,TRIGGERGUID_S_CoS_LV_HanDefault_Point_3d203bdb-45bd-4135-83ce-9eaa885bd527,"RC_LV_Han","State_CoS_LV",NULL_00000000-0000-0000-0000-000000000000,0);
// Tarquin
DB_GLO_LevelTraveler("CoS_Main",CHARACTERGUID_S_GLO_Tarquin_a3d0cdcc-d0b0-464d-9ad7-43b38baed620,TRIGGERGUID_S_CoS_LV_TarquinDefault_Point_ce780a4f-5fe5-4c3e-91b5-8699e5ba86ad,"CoS_LV_Tarquin","State_CoS_LV",S_RC_LV_OnBoard_3d5b3e43-2126-464e-81d1-3c0b60841276,0);
// Almira & Mihaly
DB_GLO_LevelTraveler("CoS_Main",CHARACTERGUID_S_GLO_Almira_49b466a9-e67f-4e3c-8f66-3636ba7dd54f,TRIGGERGUID_S_CoS_LV_AlmiraDefault_Point_4b59158b-4573-43c3-9eef-e7abf97788e4,"CoS_LV_Almira","State_CoS_LV",S_RC_LV_OnBoard_3d5b3e43-2126-464e-81d1-3c0b60841276,0);
DB_GLO_LevelTraveler("CoS_Main",CHARACTERGUID_S_GLO_Mihaly_3355517b-0a92-426b-9160-54fa8507adf2,TRIGGERGUID_S_CoS_LV_MihalyDefault_f3cc465a-36fa-47b2-99d7-36a56205099c,"CoS_LV_Mihaly","State_CoS_LV",S_RC_LV_OnBoard_3d5b3e43-2126-464e-81d1-3c0b60841276,0);
// Gareth (light path)
DB_GLO_LevelTraveler("CoS_Main",CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,TRIGGERGUID_S_CoS_LV_GarethDefault_Point_7024f11f-3d2a-430c-8cc8-339771411791,"CoS_LV_Gareth","State_CoS_LV",S_RC_LV_OnBoard_3d5b3e43-2126-464e-81d1-3c0b60841276,0);
//Jahan
DB_GLO_LevelTraveler("CoS_Main",CHARACTERGUID_S_GLO_Jahan_4d222cfd-49c8-41d3-8cb7-2a2b56232633,TRIGGERGUID_S_GLO_LV_JahanDefault_8262f1eb-0047-4fc4-9ccd-2d23317c9794,"CoS_LV_Jahan","",S_RC_LV_OnBoard_3d5b3e43-2126-464e-81d1-3c0b60841276,0);

// CoS to CoS_Ending
// Malady (always goes to CoS_Ending)
DB_GLO_LevelTraveler("CoS_Main_Ending",(CHARACTERGUID)CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,(TRIGGERGUID)S_CoS_LV_HoE_MaladyPoint_3eb15e18-bd10-4962-bf84-f03185d5c72c,"CoS_LV_HoE_River","State_CoS_LV",(TRIGGERGUID)NULL_00000000-0000-0000-0000-000000000000,0);
// Han (also always goes to CoS_Ending)
DB_GLO_LevelTraveler("CoS_Main_Ending",CHARACTERGUID_S_FTJ_CapturedChild_53d4aa5c-dd91-4e12-9ca8-d66879cc6ffb,TRIGGERGUID_S_CoS_LV_HoE_HanDefault_Point_411ddb23-22ba-47f3-b04e-5aaf93780bd7,"CoS_LV_HoE_Han","State_CoS_LV",NULL_00000000-0000-0000-0000-000000000000,0);
// Tarquin
DB_GLO_LevelTraveler("CoS_Main_Ending",CHARACTERGUID_S_GLO_Tarquin_a3d0cdcc-d0b0-464d-9ad7-43b38baed620,TRIGGERGUID_S_CoS_LV_HoE_TarquinDefault_Point_1ba57e6b-2a5d-4ef0-84ee-f1f5e8491d33,"CoS_LV_Tarquin","State_CoS_LV",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_f9679914-8348-4083-9171-1f62bd020ef0,0);
// Almira & Mihaly
DB_GLO_LevelTraveler("CoS_Main_Ending",CHARACTERGUID_S_GLO_Almira_49b466a9-e67f-4e3c-8f66-3636ba7dd54f,TRIGGERGUID_S_CoS_LV_HoE_AlmiraDefault_Point_e4e5ae31-985a-4adb-a7cd-e273114f01f0,"CoS_LV_Almira","State_CoS_LV",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_f9679914-8348-4083-9171-1f62bd020ef0,0);
DB_GLO_LevelTraveler("CoS_Main_Ending",CHARACTERGUID_S_GLO_Mihaly_3355517b-0a92-426b-9160-54fa8507adf2,TRIGGERGUID_S_CoS_LV_HoE_MihalyDefault_521398cb-e681-400e-9644-57465ac7d56e,"CoS_LV_Mihaly","State_CoS_LV",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_f9679914-8348-4083-9171-1f62bd020ef0,0);
// Gareth (light path)
DB_GLO_LevelTraveler("CoS_Main_Ending",CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,TRIGGERGUID_S_CoS_LV_HoE_GarethDefault_Point_000_aa1e3fe4-16c5-401d-9eb4-6f4de7bcce14,"CoS_LV_Gareth","State_CoS_LV",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_f9679914-8348-4083-9171-1f62bd020ef0,0);
//Jahan
DB_GLO_LevelTraveler("CoS_Main_Ending",CHARACTERGUID_S_GLO_Jahan_4d222cfd-49c8-41d3-8cb7-2a2b56232633,TRIGGERGUID_S_GLO_LV_JahanDefault_8262f1eb-0047-4fc4-9ccd-2d23317c9794,"CoS_LV_Jahan","",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_f9679914-8348-4083-9171-1f62bd020ef0,0);


// CoS_Ending to ARX

// Malady (always goes to ARX, can't leave for ARX without her on the boat -> no trigger check, so it automatically works)
DB_GLO_LevelTraveler("ARX_Main",(CHARACTERGUID)CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,(TRIGGERGUID)TRIGGERGUID_S_ARX_Outskirts_LV_MaladyPoint_167992f7-7a51-41e9-9796-8aa9631b60a4,"ARX_LV_River","State_ARX_LV",(TRIGGERGUID)NULL_00000000-0000-0000-0000-000000000000,0);
// Han (also always goes to ARX)
DB_GLO_LevelTraveler("ARX_Main",CHARACTERGUID_S_FTJ_CapturedChild_53d4aa5c-dd91-4e12-9ca8-d66879cc6ffb,TRIGGERGUID_S_ARX_Outskirts_HanPoint_bdd39b26-68d1-4dda-85aa-53de59721a64,"RC_LV_Han","State_ARX_LV",NULL_00000000-0000-0000-0000-000000000000,0);
// Tarquin
DB_GLO_LevelTraveler("ARX_Main",CHARACTERGUID_S_GLO_Tarquin_a3d0cdcc-d0b0-464d-9ad7-43b38baed620,TRIGGERGUID_S_ARX_Outskirts_TarquinPoint_30af69ea-3878-4868-b2e0-73c08f5e974e,"ARX_LV_Tarquin","State_ARX_LV",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_HoE_46af229d-8bbb-4ff3-9e27-cf87cc51247e,0);
// Almira & Mihaly
DB_GLO_LevelTraveler("ARX_Main",CHARACTERGUID_S_GLO_Almira_49b466a9-e67f-4e3c-8f66-3636ba7dd54f,TRIGGERGUID_S_ARX_Outskirts_AlmiraPoint_121f55b9-9c57-40a8-b132-d726b065eb06,"ARX_LV_Almira","State_ARX_LV",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_HoE_46af229d-8bbb-4ff3-9e27-cf87cc51247e,0);
DB_GLO_LevelTraveler("ARX_Main",CHARACTERGUID_S_GLO_Mihaly_3355517b-0a92-426b-9160-54fa8507adf2,TRIGGERGUID_S_ARX_Outskirts_MihalyPoint_8224ac7e-6ee2-4e40-a818-8d0d94b81e0b,"ARX_LV_Mihaly","State_ARX_LV",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_HoE_46af229d-8bbb-4ff3-9e27-cf87cc51247e,0);
// Gareth (light path)
DB_GLO_LevelTraveler("ARX_Main",CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,TRIGGERGUID_S_ARX_Outskirts_GarethPoint_2966c0aa-beec-4f2b-9373-48abc05df269,"ARX_LV_Gareth","State_ARX_LV",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_HoE_46af229d-8bbb-4ff3-9e27-cf87cc51247e,0);
// Jahan (QuestUpdate_RC_BF_ThePresence_ToldDemonsName)
DB_GLO_LevelTraveler("ARX_Main",CHARACTERGUID_S_GLO_Jahan_4d222cfd-49c8-41d3-8cb7-2a2b56232633,TRIGGERGUID_S_ARX_Outskirts_JahanPoint_17f36965-5a01-4190-9d96-6ce42c435102,"ARX_LV_Jahan","State_ARX_LV",TRIGGERGUID_S_CoS_SUB_Temples_LVTopDeck_HoE_46af229d-8bbb-4ff3-9e27-cf87cc51247e,0);
KBSECTION
//REGION RC_Main
//River Initiation (On Region start)
PROC
PROC_GLO_LevelTravelAgency_Arrived(CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,"RC_Main")
THEN
CharacterLookFromTrigger(CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,TRIGGERGUID_S_RC_DU_RiverStartLocation_fd9878a0-b203-4846-8cf5-8f7b30bf3162,1);

//Set Spotter script vars (a bit overkill now that the players start next to Malady,
// but convenient since we cannot catch the GameStarted event here (the ReapersCoast
// parent goal on completes
SetVarFixedString(CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,"GlobalEvent_InitiateSpotter","RC_DU_VL_EnableSpottingLogicRiver");
SetVarFixedString(CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,"GlobalEvent_StopSpotter","RC_DU_VL_StopSpottingLogicRiver");
SetVarString(CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,"SpotCharacterEvent","RC_DU_VL_StartRiverDialogue");
SetVarFloat(CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,"CheckRadius",8.0);

//Enable spotting script River
GlobalSetFlag("RC_DU_VL_EnableSpottingLogicRiver");

//END_REGION

//REGION CoS
//Malady
PROC
PROC_GLO_LevelTravelAgency_Arrived(CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,"CoS_Main")
THEN
CharacterLevelUpTo(CHARACTERGUID_S_GLO_River_f4931ebe-10b0-43c4-9182-640cf052717e,16);

//Tarquin
PROC
PROC_GLO_LevelTravelAgency_Arrived(CHARACTERGUID_S_GLO_Tarquin_a3d0cdcc-d0b0-464d-9ad7-43b38baed620,"CoS_Main")
THEN
CharacterLevelUpTo(CHARACTERGUID_S_GLO_Tarquin_a3d0cdcc-d0b0-464d-9ad7-43b38baed620,15);

//Almira
PROC
PROC_GLO_LevelTravelAgency_Arrived(CHARACTERGUID_S_GLO_Almira_49b466a9-e67f-4e3c-8f66-3636ba7dd54f,"CoS_Main")
THEN
CharacterLevelUpTo(CHARACTERGUID_S_GLO_Almira_49b466a9-e67f-4e3c-8f66-3636ba7dd54f,15);

QRY
QRY_GLO_LevelTravelAgency_ForbidBoardingTo(_AlmiraGroup,"CoS_Main")
AND
DB_RC_FL_AlmiraGroup(_AlmiraGroup,_)
AND
NOT DB_GlobalFlag("RC_FL_BrokenPromises_AlmiraToShip")
THEN
DB_NOOP(1);

//Gareth
PROC
PROC_GLO_LevelTravelAgency_Arrived(CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,"CoS_Main")
THEN
CharacterLevelUpTo(CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,16);

//END_REGION

//REGION arx
PROC
PROC_GLO_LevelTravelAgency_Arrived(_Char,"ARX_Main")
THEN
CharacterLevelUpTo(_Char,19);

QRY
QRY_GLO_LevelTravelAgency_ForbidBoardingTo(_AlmiraGroup,"ARX_Main")
AND
DB_RC_FL_AlmiraGroup(_AlmiraGroup,_)
AND
NOT DB_GlobalFlag("RC_FL_BrokenPromises_AlmiraToShip")
THEN
DB_NOOP(1);

PROC
PROC_GLO_LevelTravelAgency_Arrived(CHARACTERGUID_S_GLO_Jahan_4d222cfd-49c8-41d3-8cb7-2a2b56232633,"ARX_Main")
THEN
ClearVarObject(CHARACTERGUID_S_GLO_Jahan_4d222cfd-49c8-41d3-8cb7-2a2b56232633,"CharToTalkTo");
ClearVarObject(CHARACTERGUID_S_GLO_Jahan_4d222cfd-49c8-41d3-8cb7-2a2b56232633,"ADDialog");
GlobalSetFlag("ARX_LV_Jahan_InArx");
SetVarFixedString(CHARACTERGUID_S_ARX_Outskirts_PilgrimCamp_Pilgrim_02_94aabc2a-f496-4c20-973f-44e727108167,"currentState","");
ProcFaceEachother(CHARACTERGUID_S_GLO_Jahan_4d222cfd-49c8-41d3-8cb7-2a2b56232633,CHARACTERGUID_S_ARX_Outskirts_PilgrimCamp_Pilgrim_02_94aabc2a-f496-4c20-973f-44e727108167);

PROC
PROC_GLO_LevelTravelAgency_Arrived(CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,"ARX_Main")
THEN
ApplyStatus(CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,"KNOCKED_DOWN",-1.0,1);
GlobalSetFlag("ARX_LV_Gareth_InArx");
SetStoryEvent(CHARACTERGUID_S_FTJ_SW_Warrior_SeekerCaptain_1329f018-23e4-4717-9bc8-074b28d04c54,"ARX_TheCrash_StartTimer");

PROC
PROC_GLO_LevelTravelAgency_Arrived(CHARACTERGUID_S_GLO_Tarquin_a3d0cdcc-d0b0-464d-9ad7-43b38baed620,"ARX_Main")
THEN
SetVarObject(CHARACTERGUID_S_GLO_Tarquin_a3d0cdcc-d0b0-464d-9ad7-43b38baed620,"Seat",ITEMGUID_S_ARX_LV_Tarquin_InvisChair_f4cb30f9-ce26-4703-a0c6-780aae1712ca);
GlobalSetFlag("ARX_LV_Tarquin_InArx");
//END_REGION

//REGION Level Swap confirmation

IF
ObjectFlagSet("FTJ_SW_ConfirmLeavingAct1",(CHARACTERGUID)_Player,_)
AND
CharacterGetLevel(_Player,_Lvl)
AND
_Lvl > 6
THEN
ObjectClearFlag(_Player,"FTJ_SW_ConfirmLeavingAct1");
OpenMessageBox(_Player,"Message_LeavingActNormalLevel");

IF
ObjectFlagSet("FTJ_SW_ConfirmLeavingAct1",(CHARACTERGUID)_Player,_)
AND
CharacterGetLevel(_Player,_Lvl)
AND
_Lvl <= 6
THEN
ObjectClearFlag(_Player,"FTJ_SW_ConfirmLeavingAct1");
OpenMessageBox(_Player,"Message_LeavingActLowLevel");

IF
ObjectFlagSet("RC_LV_ConfirmLeavingAct2",(CHARACTERGUID)_Player,_)
AND
CharacterGetLevel(_Player,_Lvl)
AND
_Lvl > 14
THEN
ObjectClearFlag(_Player,"RC_LV_ConfirmLeavingAct2");
OpenMessageBox(_Player,"Message_LeavingActNormalLevel");

IF
ObjectFlagSet("RC_LV_ConfirmLeavingAct2",(CHARACTERGUID)_Player,_)
AND
CharacterGetLevel(_Player,_Lvl)
AND
_Lvl <= 14
THEN
ObjectClearFlag(_Player,"RC_LV_ConfirmLeavingAct2");
OpenMessageBox(_Player,"Message_LeavingActLowLevel");

//END_REGION
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "DOS2ModWrapper"
