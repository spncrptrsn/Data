Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
TextEventSet("CloseQuests")
AND
CharacterGetHostCharacter(_Char)
THEN
ObjectSetFlag(_Char,"QuestUpdate_RC_DF_TrollBridge_MetGrog");
ObjectSetFlag(_Char,"QuestUpdate_RC_DF_TrollBridge_CounterOffer");

IF
TextEventSet("repeatWindego")
THEN
DB_DebugRepeatWindego(1);

IF
TextEventSet("stopWindego")
THEN
NOT DB_DebugRepeatWindego(1);

IF
TimerFinished("TUT_StopWindegoWave")
AND
DB_DebugRepeatWindego(1)
THEN
TimerLaunch("DBG_RepeatWindego",8000);

IF
TimerFinished("TUT_StopWindegoWave")
AND
DB_DebugRepeatWindego(1)
THEN
NOT DB_TUT_WindegoFinishedCastingAnimation(1);
Proc_DbgClearWindegoSurfaces();
TriggerLaunchIterator(S_TUT_LowerDeck_Box_6ee7d227-8d55-485f-bfa5-135cf23a6bd1,"DBG_Restore");
NOT DB_TUT_LowerDeck_BlackOutAfterWindego(1);
NOT DB_OnlyOnce("TUT_WindegoWakeUpPlayers");
SetOnStage(CHARACTERGUID_S_GLO_Windego_d783285f-d3be-4cba-8333-db8976cef182,1);
NOT DB_OnlyOnce("PROC_TUT_WindegoHasCastExplosion");
PROC_TUT_DebugRestoreWindego();
PROC_TUT_LowerDeck_WindegoStart();

PROC
Proc_DbgClearWindegoSurfaces()
AND
DB_TUT_LowerDeck_WindegoExplosionPoints(_ExplosionPoint,_Skill,_Delay)
AND
GetPosition(_ExplosionPoint,_X,_Y,_Z)
THEN
CreateSurfaceAtPosition(_X,_Y,_Z,"SurfaceNone",2.0,-1.0);

PROC
Proc_DbgClearWindegoSurfaces()
AND
DB_TUT_LowerDeck_LeakEffects(_Effect)
THEN
SetOnStage(_Effect,0);

IF
StoryEvent((CHARACTERGUID)_Char,"DBG_Restore")
AND
CharacterIsDead(_Char,1)
THEN
CharacterResurrect(_Char);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "DOS2ModWrapper"
