Version 1
SubGoalCombiner SGC_AND
INITSECTION
//REGION Sub-Regions (Define before Exploration triggers)
//Temples
DB_Subregion(TRIGGERGUID_S_CoS_Temples_SUB_Island_b5ab6a49-b015-4908-8f49-7b152d6c5d30,"CoS_SUB_Temples_Island",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_Lizard_0a009ed0-61f5-4670-9d26-1417ebf02922,"CoS_SUB_Temples_Lizard",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_Human_1d089d37-fc5e-4cc6-807e-51d0535dc0cc,"CoS_SUB_Temples_Human",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_SallowManWarRoom_494b9887-749a-4d05-b6b1-0f400eab5d9e,"CoS_SUB_Temples_SallowManWarRoom",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_Imp_11361b1e-7609-41bd-9334-fadb26024a9d,"CoS_SUB_Temples_Imp",1);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_PocketPlane_0aa27bf9-6e3f-45ff-8868-7e7f7dde8302,"CoS_SUB_Temples_PocketPlane",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_Lizard_0a009ed0-61f5-4670-9d26-1417ebf02922,"CoS_SUB_Temples_Lizard",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_Orc_Outer_822f3b48-7129-46b4-8de9-260d87f0dd19,"CoS_SUB_Temples_Orc_Outer",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_Orc_Inner_e29d71c5-f0ff-4336-9928-599392e9a0e8,"CoS_SUB_Temples_Orc_Inner",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_OrcArmory_a8e3cbbb-3364-41c1-9396-14faeefce41f,"CoS_SUB_Temples_OrcArmory",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_Wizard_b339683b-fb87-4fe5-93ab-599970df44af,"CoS_SUB_Temples_Wizard",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_Wizard_InnerSanctum_c0077883-34f0-452a-a862-a1db58d71578,"CoS_SUB_Temples_Wizard_InnerSanctum",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_LavaFields_4a44049c-0090-4feb-a0ad-4e5e77f96a25,"CoS_SUB_Temples_LavaFields",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_BlackRingEncampment_3e419709-30ca-4c37-af1b-2b9bbedd0a33,"CoS_SUB_Temples_BlackRingEncampment",0);
DB_SubregionMarker(TRIGGERGUID_S_CoS_SUB_Temples_LunarShrine_1f465afc-c57c-4f4b-9860-d874655f3444,"CoS_SUB_Temples_LunarShrine","CoS_LunarShrine");
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_DwarfOuter_49078452-7317-47ba-9d57-67d17227d6f3,"CoS_SUB_Temples_DwarfOuter",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_DwarfInner_62b3a712-6e35-4132-9dfe-b3dbb7e35fbf,"CoS_SUB_Temples_DwarfInner",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_Elf_b3f134d0-e320-4bec-802c-6a093d291363,"CoS_SUB_Temples_Elf",0);
DB_Subregion(TRIGGERGUID_S_CoS_Temples_Ownership_BRHub_7c89adbe-c083-4a84-b0d1-34b067e8a39f,"CoS_SUB_Temples_BRHub",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_BoosterCave001_7b87e83b-f610-429e-bff4-70caa4157afd,"CoS_SUB_Temples_BoosterCave001",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_BoosterCave002_44af9400-c36a-48d8-8902-d3e90294f968,"CoS_SUB_Temples_BoosterCave002",0);
DB_Subregion(TRIGGERGUID_S_CoS_Temples_SUB_SecretTunnel_dbc4e41f-23b4-4387-9b64-81a5b46e0b1e,"CoS_SUB_Temples_SecretTunnel",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Temples_HeartOfTheMotherTree_835b82d7-62a7-4388-a2dd-9628ab0075f8,"CoS_SUB_Temples_HeartOfTheMotherTree",0);

//Academy
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Academy_51ddb828-18a6-4b6e-9f5a-e2b2883862e1,"CoS_SUB_Academy",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Academy_TeacherRoom_cb783da9-a24b-48d4-904d-d04408d8a089,"CoS_SUB_Academy_TeacherRoom",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Academy_Temple_814547e3-9867-4a17-904d-f465736a7a5f,"CoS_SUB_Academy_Temple",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Academy_Library_bb3fbf51-7449-4dd9-b230-d5692c517e6e,"CoS_SUB_Academy_Library",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_ForbiddenLibrary_92065793-c0de-4946-9e64-6758b816e79d,"CoS_SUB_ForbiddenLibrary",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Academy_ArmamentsRoom_2575c373-08d3-412c-9776-63b068026268,"CoS_SUB_Academy_ArmamentsRoom",0);
DB_Subregion(TRIGGERGUID_S_CoS_Academy_XP_StudentRoomSecret_6ed60aa1-f5ef-473d-81cb-2f78e6a0d633,"CoS_SUB_Academy_SecretRoom",0);
DB_Subregion(TRIGGERGUID_S_CoS_SUB_Academy_OldArena_0926e4be-a712-470a-ad6f-564436adfb9d,"CoS_SUB_Academy_OldArena",0);


//END_REGION

//REGION Exploration Triggers
//Temples
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_PocketPlane_0aa27bf9-6e3f-45ff-8868-7e7f7dde8302,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_Orc_Inner_e29d71c5-f0ff-4336-9928-599392e9a0e8,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_BlackRingEncampment_3e419709-30ca-4c37-af1b-2b9bbedd0a33,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_DwarfInner_62b3a712-6e35-4132-9dfe-b3dbb7e35fbf,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_OrcArmory_a8e3cbbb-3364-41c1-9396-14faeefce41f,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_Wizard_b339683b-fb87-4fe5-93ab-599970df44af,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_SallowManWarRoom_494b9887-749a-4d05-b6b1-0f400eab5d9e,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_Temples_SUB_SecretTunnel_dbc4e41f-23b4-4387-9b64-81a5b46e0b1e,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_Elf_b3f134d0-e320-4bec-802c-6a093d291363,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_HeartOfTheMotherTree_835b82d7-62a7-4388-a2dd-9628ab0075f8,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_BoosterCave001_7b87e83b-f610-429e-bff4-70caa4157afd,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_BoosterCave002_44af9400-c36a-48d8-8902-d3e90294f968,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_Lizard_0a009ed0-61f5-4670-9d26-1417ebf02922,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_XP_BlackRingPortal_1f6c4831-7487-419b-ae3d-b0cd1e9f1f31,1,16,1);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Temples_Human_1d089d37-fc5e-4cc6-807e-51d0535dc0cc,1,16,1);



//Academy
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_ForbiddenLibrary_92065793-c0de-4946-9e64-6758b816e79d,1,17,3);
DB_ExplorationZones(TRIGGERGUID_S_CoS_Academy_XP_StudentRoomSecret_6ed60aa1-f5ef-473d-81cb-2f78e6a0d633,1,17,3);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Academy_ArmamentsRoom_2575c373-08d3-412c-9776-63b068026268,1,17,2);
DB_ExplorationZones(TRIGGERGUID_S_CoS_SUB_Academy_Temple_814547e3-9867-4a17-904d-f465736a7a5f,1,17,2);
DB_ExplorationZones(TRIGGERGUID_S_CoS_XP_GuardianAutomaton_5f7c1ca1-13af-4384-adfb-d5f6559babd9,1,17,3);


//END_REGION

//REGION Ownership Triggers

DB_ItemOwnerShipTriggers("CoS_Main",TRIGGERGUID_S_CoS_Temples_Ownership_CoweringBlackRing_b1f84494-1efc-49a0-8035-8fdb7aa911f1,CHARACTERGUID_S_CoS_Temples_Elf_BlackRing_002_4078d759-ed9d-4971-9f68-415cb9a71704);
DB_ItemOwnerShipTriggers("CoS_Main",TRIGGERGUID_S_CoS_Temples_Ownership_SallowMan_415fc0d4-f823-4c07-a6c6-3b4686588251,CHARACTERGUID_S_CoS_Temples_SallowMan_d07e0f6b-c473-47f2-9d1c-e1f6f0ef61af);
DB_ItemOwnerShipTriggers("CoS_Main",TRIGGERGUID_S_CoS_Temples_Ownership_BRHub_7c89adbe-c083-4a84-b0d1-34b067e8a39f,CHARACTERGUID_S_CoS_Temples_BlackRingHub_Captain_7d32e545-6c6c-4a95-90dd-3ed14d3a20de);
DB_ItemOwnerShipTriggers("CoS_Main",TRIGGERGUID_S_CoS_Temples_Ownership_OrcCamp_9e393b8d-8deb-4b30-a718-5c073c91ea25,CHARACTERGUID_S_CoS_Temples_Orc_CampBlackRing_Captain_1eceaf90-79a6-4d36-9360-975f1464b0e3);
DB_ItemOwnerShipTriggers("CoS_Main",TRIGGERGUID_S_CoS_Temples_Ownership_SpyMaster_459d5ee0-4f49-4ebc-827c-8626356d70f2,CHARACTERGUID_S_CoS_Temples_SpyMaster_787c6c4a-6e5a-4044-9616-27e21e5a171e);

//END_REGION


//REGION Autosave Triggers

//Island
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_DwarfInner_62b3a712-6e35-4132-9dfe-b3dbb7e35fbf);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_Orc_Inner_e29d71c5-f0ff-4336-9928-599392e9a0e8);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_LavaFields_4a44049c-0090-4feb-a0ad-4e5e77f96a25);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_LunarShrine_1f465afc-c57c-4f4b-9860-d874655f3444);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Temples_Autosave_HumanTemple_a0ce879c-a26a-4749-abf1-2eefa56ff331);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Temples_Autosave_ElfTempleShriekers_05c77567-01b6-4a56-b2ff-d82765558e85);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Temples_Autosave_Elf_Alexandar_5ee9f433-2585-4fc1-b1cc-c3700b8f66e4);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Temples_Autosave_Dwarf_001_662d7dd5-ad0c-4ab8-b0dd-d22a89963a93);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Temples_Autosave_Dwarf_002_40936a8a-ff57-44d4-8b9b-e8e3d39dda20);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Temples_Autosave_Lizard_001_3843ac0e-7351-4892-9fd5-da4fbab67d21);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Temples_Autosave_PortalMaster_10a03109-c15d-40d8-87a8-b389ce63fa5f);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Temples_SUB_SecretTunnel_dbc4e41f-23b4-4387-9b64-81a5b46e0b1e);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Temples_Autosave_ImpDoorToCore_4e4fc1b9-1b38-424d-83b5-7597c2c2457f);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_PocketPlane_0aa27bf9-6e3f-45ff-8868-7e7f7dde8302);

//Academy
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Academy_51ddb828-18a6-4b6e-9f5a-e2b2883862e1);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Academy_Temple_814547e3-9867-4a17-904d-f465736a7a5f);

//Temples
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_Autosave_LVTopDeck_c360d5c8-6474-4ec9-ac8c-12d0edbb3782);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Academy_OldArena_0926e4be-a712-470a-ad6f-564436adfb9d);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_BoosterCave001_7b87e83b-f610-429e-bff4-70caa4157afd);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_HeartOfTheMotherTree_835b82d7-62a7-4388-a2dd-9628ab0075f8);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_SallowManWarRoom_494b9887-749a-4d05-b6b1-0f400eab5d9e);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_Wizard_b339683b-fb87-4fe5-93ab-599970df44af);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_OrcArmory_a8e3cbbb-3364-41c1-9396-14faeefce41f);
DB_AutoSaveTrigger(TRIGGERGUID_S_CoS_SUB_Temples_PocketPlane_0aa27bf9-6e3f-45ff-8868-7e7f7dde8302);

//END_REGION

Proc_CoS_AllowWaypointUsage();
KBSECTION
//Allow unlock after first dialog with a waypoint
PROC
Proc_CoS_AllowWaypointUsage()
THEN
DB_WaypointInfo((ITEMGUID)ITEMGUID_S_CoS_Temples_Waypoint_Beach_d3e51c58-9361-4d78-b967-9061e2b60e7e,(TRIGGERGUID)TRIGGERGUID_S_CoS_Temples_Waypoint_Beach_Point_0739766c-729b-45ec-870e-607a2e9da8c5,"WAYP_CoS_Temples_Beach");
DB_WaypointInfo((ITEMGUID)ITEMGUID_S_CoS_Temples_Waypoint_Elf_c32b2004-2f1c-446e-a23c-a1d8f6705922,(TRIGGERGUID)TRIGGERGUID_S_CoS_Temples_Waypoint_ElfTemple_b356750d-f4a8-4040-96e0-84b9d71e8fc9,"WAYP_CoS_Temples_ElfTemple");
DB_WaypointInfo((ITEMGUID)ITEMGUID_S_CoS_Temples_Waypoint_Human_892e7e94-75b5-44d2-bc6f-1f735f7c8965,(TRIGGERGUID)TRIGGERGUID_S_CoS_Temples_Waypoint_Human_Point_416c1174-9826-4dc5-bcd9-933387a58f6a,"WAYP_CoS_Temples_Human");
DB_WaypointInfo((ITEMGUID)ITEMGUID_S_CoS_Temples_Waypoint_LunarPuzzle_7a7da96f-5e96-4800-85a7-5a54594d6e81,(TRIGGERGUID)TRIGGERGUID_S_CoS_Temples_Waypoint_LunarPuzzle_Point_672a0928-094d-4982-b542-3fc1c3faa8d3,"WAYP_CoS_Temples_LunarPuzzle");
DB_WaypointInfo((ITEMGUID)ITEMGUID_S_CoS_Academy_Waypoint_Central_2db50e45-a3f7-4f6f-bcef-d99df60617a0,(TRIGGERGUID)TRIGGERGUID_S_CoS_Academy_Waypoint_Central_Point_e28abb66-7361-4cb2-ae6e-eea182b05b46,"WAYP_CoS_Academy_Central");
DB_WaypointInfo((ITEMGUID)ITEMGUID_S_CoS_Temples_Waypoint_Wizard_d089a9bd-9f20-4710-826f-f3a719039861,(TRIGGERGUID)TRIGGERGUID_S_CoS_Temples_Waypoint_Wizard_Point_8908a5de-cbf1-4e8a-b272-56896fd670b1,"WAYP_CoS_Temples_Wizard");
DB_WaypointInfo((ITEMGUID)ITEMGUID_S_CoS_Temples_Waypoint_Imp_0f989a2f-6a3e-4123-be34-c84c4fe17744,(TRIGGERGUID)TRIGGERGUID_S_CoS_Temples_Waypoint_Imp_Point_2cb11394-785b-47ef-bdf9-f8c9134dde06,"WAYP_CoS_Temples_Imp");
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "CouncilOfSeven"
