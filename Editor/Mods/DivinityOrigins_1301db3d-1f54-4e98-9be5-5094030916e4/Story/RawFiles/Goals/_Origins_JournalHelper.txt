Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
//REGION Companion updates

IF
ObjectFlagSet(_Flag,(CHARACTERGUID)_Player,_)
AND
DB_CompanionUpdateObjectFlag(_CompanionID,_Update,_Flag)
AND
DB_OriginID(_Companion,_CompanionID)
AND
NOT DB_Avatars(_Companion)
AND
DB_CompanionAvatarBond(_Companion,_Player)
THEN
UserSetFlag(_Player,_Update);

IF
GlobalFlagSet(_Flag)
AND
DB_CompanionUpdateGlobalFlag(_CompanionID,_Update,_Flag)
AND
DB_OriginID(_Companion,_CompanionID)
AND
NOT DB_Avatars(_Companion)
AND
DB_CompanionAvatarBond(_Companion,_Player)
THEN
UserSetFlag(_Player,_Update);


PROC
ProcRegionStarted(_Region)
AND
DB_CompanionUpdateRegionStart((STRING)_CompanionID,(STRING)_Update,(STRING)_Region)
AND
DB_OriginID(_Companion,_CompanionID)
AND
NOT DB_Avatars(_Companion)
AND
DB_CompanionAvatarBond(_Companion,_Player)
THEN
UserSetFlag(_Player,_Update);


PROC
ProcRegionStarted(_Region)
AND
DB_CompanionUpdateRegionStart_ObjFlag_ObjFlag((STRING)_CompanionID,(STRING)_Region,(STRING)_Update,(STRING)_Flag1,(INTEGER)_Value1,(STRING)_Flag2,(INTEGER)_Value2)
AND
DB_OriginID(_Companion,_CompanionID)
AND
NOT DB_Avatars(_Companion)
AND
DB_CompanionAvatarBond(_Companion,_Player)
AND
UserGetFlag(_Companion,_Flag1,_Value1)
AND
UserGetFlag(_Companion,_Flag2,_Value2)
THEN
UserSetFlag((CHARACTERGUID)_Player,_Update);


//END_REGION
//REGION Avatar updates

IF
ObjectFlagSet(_Flag,(CHARACTERGUID)_Avatar,_)
AND
DB_Avatars(_Avatar)
AND
DB_AvatarUpdateObjectFlag(_AvatarID,_Update,_Flag)
AND
DB_OriginID(_Avatar,_AvatarID)
THEN
ObjectSetFlag(_Avatar,_Update);


IF
GlobalFlagSet(_Flag)
AND
DB_AvatarUpdateGlobalFlag(_AvatarID,_Update,_Flag)
AND
DB_OriginID(_Avatar,_AvatarID)
AND
DB_Avatars(_Avatar)
THEN
ObjectSetFlag(_Avatar,_Update);


PROC
ProcRegionStarted(_Region)
AND
DB_Avatars(_Avatar)
AND
DB_OriginID(_Avatar,_AvatarID)
AND
DB_AvatarUpdateRegionStart(_AvatarID,_Update,_Region)
THEN
ObjectSetFlag(_Avatar,_Update);



PROC
ProcRegionStarted(_Region)
AND
DB_Avatars(_Avatar)
AND
DB_OriginID(_Avatar,_AvatarID)
AND
DB_AvatarUpdateRegionStart_ObjFlag_ObjFlag((STRING)_AvatarID,(STRING)_Region,(STRING)_Update,(STRING)_Flag1,(INTEGER)_Value1,(STRING)_Flag2,(INTEGER)_Value2)
AND
ObjectGetFlag(_Avatar,_Flag1,_Value1)
AND
ObjectGetFlag(_Avatar,_Flag2,_Value2)
THEN
UserSetFlag((CHARACTERGUID)_Avatar,_Update);

//END_REGION


EXITSECTION

ENDEXITSECTION
ParentTargetEdge "DOS2ModWrapper"
