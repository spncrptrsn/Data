Version 1
SubGoalCombiner SGC_AND
INITSECTION
//MoveToTrigger Audio Events 
DB_MoveToTrigger_Materials("STONE");
DB_MoveToTrigger_Materials("WOOD");
DB_MoveToTrigger_Materials("METAL");

DB_CameraShakeAudioEventTrigger(800,5001);

DB_DebugCameraShakerParser("500",500);
DB_DebugCameraShakerParser("1000",1000);
DB_DebugCameraShakerParser("3000",3000);
DB_DebugCameraShakerParser("5000",5000);
DB_DebugCameraShakerParser("8000",8000);
DB_DebugCameraShakerParser("13000",13000);


DB_DebugCameraShakerParser("2",2);
DB_DebugCameraShakerParser("5",5);
DB_DebugCameraShakerParser("1",1);
DB_DebugCameraShakerParser("25",25);
DB_DebugCameraShakerParser("60",60);
KBSECTION
//REGION MoveToTrigger //Audio Play Sounds according to Material

PROC
proc_ItemMoveToTrigger((ITEMGUID)_Item,(TRIGGERGUID)_Trigger,(REAL)_Speed,(REAL)_Acceleration,(INTEGER)_UseRotation)
THEN
ItemMoveToTrigger(_Item,_Trigger,_Speed,_Acceleration,_UseRotation);

PROC
Proc_ItemMoveToPosition((ITEMGUID)_Item,(REAL)_X,(REAL)_Y,(REAL)_Z,(REAL)_Speed,(REAL)_Acceleration)
THEN
ItemMoveToPosition(_Item,_X,_Y,_Z,_Speed,_Acceleration);

PROC
Proc_ItemMoveToPosition((ITEMGUID)_Item,(REAL)_PlusX,(REAL)_PlusY,(REAL)_PlusZ,(REAL)_Speed,(REAL)_Acceleration)
AND
NOT DB_MovingItem(_Item,_)
AND
DB_MoveToTrigger_Materials(_Tag)
AND
IsTagged(_Item,_Tag,1)
AND
StringConcatenate("Items_Puzzles_MovingObjects_",_Tag,_SoundEventPre)
AND
StringConcatenate(_SoundEventPre,"_Start",_SoundEvent)
THEN
DB_MovingItem(_Item,_Tag);
PlaySound(_Item,_SoundEvent);
DebugText(_Item,"PlayEvent_Move_Start");


PROC
proc_ItemMoveToTrigger((ITEMGUID)_Item,(TRIGGERGUID)_Trigger,(REAL)_Speed,(REAL)_Acceleration,(INTEGER)_UseRotation)
AND
NOT DB_MovingItem(_Item,_)
AND
DB_MoveToTrigger_Materials(_Tag)
AND
IsTagged(_Item,_Tag,1)
AND
StringConcatenate("Items_Puzzles_MovingObjects_",_Tag,_SoundEventPre)
AND
StringConcatenate(_SoundEventPre,"_Start",_SoundEvent)
THEN
DB_MovingItem(_Item,_Tag);
PlaySound(_Item,_SoundEvent);
DebugText(_Item,"PlayEvent_Move_Start");


IF
StoryEvent(_Item,"GEN_ItemMoved")
AND
NOT DB_MovingItem((ITEMGUID)_Item,_)
AND
DB_MoveToTrigger_Materials(_Tag)
AND
IsTagged(_Item,_Tag,1)
AND
StringConcatenate("Items_Puzzles_MovingObjects_",_Tag,_SoundEventPre)
AND
StringConcatenate(_SoundEventPre,"_Start",_SoundEvent)
THEN
DB_MovingItem(_Item,_Tag);
PlaySound(_Item,_SoundEvent);
DebugText(_Item,"PlayEvent_Move_Start");


IF
ItemMoved(_Item)
AND
DB_MovingItem(_Item,_Tag)
AND
StringConcatenate("Items_Puzzles_MovingObjects_",_Tag,_SoundEventPre)
AND
StringConcatenate(_SoundEventPre,"_Stop",_SoundEvent)
THEN
NOT DB_MovingItem(_Item,_Tag);
PlaySound(_Item,_SoundEvent);
DebugText(_Item,"PlayEvent_Move_END");
//END_REGION

//REGION ScreenShake Audio Logic

PROC
ProcObjectTimer(_Char,"Timer_LoopCameraShakeHelper",_Time)
AND
DB_CameraShakeAudioEventTrigger(_MinDuration,_)
AND
_Time > _MinDuration
THEN
PlaySound(_Char,"SE_GP_ScriptedEvent_CameraShake_Earth");

PROC
ProcObjectTimer(_Char,"Timer_LoopCameraShakeHelper",_Time)
AND
DB_CameraShakeAudioEventTrigger(_MinDuration,_MaxDurationToCallStop)
AND
_Time > _MinDuration
AND
_Time < _MaxDurationToCallStop
THEN
DB_Timer_LoopCameraShakeHelper_StopSound(_Char);

PROC
ProcObjectTimerFinished(_Char,"Timer_LoopCameraShakeHelper")
AND
DB_Timer_LoopCameraShakeHelper_StopSound(_Char)
THEN
NOT DB_Timer_LoopCameraShakeHelper_StopSound(_Char);
PlaySound(_Char,"SE_GP_ScriptedEvent_CameraShake_Earth_Stop");


IF
TextEventSet("TestCameraShakeAudio")
AND
GetTextEventParamString(1,_TimeString)
AND
DB_DebugCameraShakerParser(_TimeString,_TimerInt)
AND
DB_IsPlayer(_Player)
THEN
Proc_ShakeCameraForTime((CHARACTERGUID)_Player,_TimerInt);


IF
TextEventSet("TestCameraShake_AroundChar_Audio")
AND
GetTextEventParamString(1,_TimeString)
AND
DB_DebugCameraShakerParser(_TimeString,_TimerInt)
AND
DB_IsPlayer(_Player)
THEN
Proc_CameraShakeAroundCharacter(_Player,_TimerInt,6.0);
//END_REGION
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "__Start"
