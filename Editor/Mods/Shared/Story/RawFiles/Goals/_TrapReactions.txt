Version 1
SubGoalCombiner SGC_AND
INITSECTION
DB_Event2DisplayText("HiddenPerceptionReveal","GEN_AD_HiddenPerceptionReveal");
DB_Event2DisplayText("HiddenTrapReveal","GEN_AD_HiddenTrapReveal");
DB_Event2DisplayText("FakePerceptionReveal","GEN_AD_FakePerceptionReveal");
DB_Event2DisplayText("AmbushReveal","GLO_AD_AmbushDetected");
KBSECTION
IF
CharacterItemEvent(_Player,_Item,_Event)
AND
NOT DB_BlockTextSpam(_Player)
AND
DB_CustomEvent2DisplayText_Item((ITEMGUID)_Item,(STRING)_Event,(STRING)_Text)
AND
_Player.DB_IsPlayer()
AND
QRY_SpeakerIsAvailable(_Player)
THEN
Proc_StartDialog(1,_Text, _Player);
DB_BlockTextSpam(_Player);
ProcObjectTimer(_Player,"BlockTextSpam",5000);

IF
StoryEvent((CHARACTERGUID)_Player,_Event)
AND
NOT DB_BlockTextSpam(_Player)
AND
_Player.DB_IsPlayer()
AND
DB_CustomEvent2DisplayText((CHARACTERGUID)_Player,(STRING)_Event,(STRING)_Text)
AND
QRY_SpeakerIsAvailable(_Player)
THEN
Proc_StartDialog(1,_Text, _Player);
DB_BlockTextSpam(_Player);
ProcObjectTimer(_Player,"BlockTextSpam",5000);

IF
StoryEvent((CHARACTERGUID)_Player,_Event)
AND
NOT DB_BlockTextSpam(_Player)
AND
_Player.DB_IsPlayer()
AND
DB_Event2DisplayText(_Event,_Text)
AND
QRY_SpeakerIsAvailable(_Player)
THEN
Proc_StartDialog(1,_Text, _Player);
DB_BlockTextSpam(_Player);
ProcObjectTimer(_Player,"BlockTextSpam",5000);

PROC
ProcObjectTimerFinished(_Player,"BlockTextSpam")
THEN
NOT DB_BlockTextSpam((CHARACTERGUID)_Player);


EXITSECTION

ENDEXITSECTION
