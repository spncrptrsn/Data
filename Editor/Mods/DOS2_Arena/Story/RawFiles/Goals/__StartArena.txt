Version 1
SubGoalCombiner SGC_AND
INITSECTION
DB_ArenaDummy((CHARACTERGUID)CHARACTERGUID_ArenaTestPlayer1_006881c7-0f63-474d-9e49-77f43725f01e);
DB_ArenaDummy((CHARACTERGUID)CHARACTERGUID_ArenaTestPlayer2_9e3af9d9-53cb-416c-a045-252c6275c458);
DB_ArenaDummy((CHARACTERGUID)CHARACTERGUID_ArenaTestPlayer3_1333d81c-bcb1-44b9-8bfc-b3e4b4f2a042);
DB_ArenaDummy((CHARACTERGUID)CHARACTERGUID_ArenaTestPlayer4_99d81628-5e92-43aa-8bd9-b1b7bce188d4);

DB_ArenaCharacterToDelete((CHARACTERGUID)CHARACTERGUID_S_Player_GenericOrigin_7b6c1f26-fe4e-40bd-a5d0-e6ff58cef4fe);
DB_ArenaCharacterToDelete(CHARACTERGUID_S_Player_GenericOrigin2_c451954c-73bf-46ce-a1d1-caa9bbdc3cfd);
DB_ArenaCharacterToDelete(CHARACTERGUID_S_Player_GenericOrigin3_41a06985-7851-4c29-8a78-398ccb313f39);
DB_ArenaCharacterToDelete(CHARACTERGUID_S_Player_GenericOrigin4_41a594ed-b768-4289-9f17-59f701cc6910);
DB_ArenaCharacterToDelete(CHARACTERGUID_S_GLO_CharacterCreationDummy_001_da072fe7-fdd5-42ae-9139-8bd4b9fca406);
DB_ArenaCharacterToDelete(CHARACTERGUID_S_GLO_CharacterCreationDummy_002_361dacdc-4135-4d3f-a9a2-3cad46ca246a);
DB_ArenaCharacterToDelete(CHARACTERGUID_S_GLO_CharacterCreationDummy_003_dded8c22-b28e-45c1-a074-eb0954602c8a);
DB_ArenaCharacterToDelete(CHARACTERGUID_S_GLO_CharacterCreationDummy_004_5f93cae7-6c10-4da1-b9a5-0efafc168c8e);

DB_ArenaLevels("DOS2_Arena_A");
DB_ArenaLevels("DOS2_Arena_B");
DB_ArenaLevels("DOS2_Arena_C");
DB_ArenaLevels("DOS2_Arena_D");
DB_ArenaLevels("DOS2_Arena_E");
DB_ArenaLevels("DOS2_Arena_F");
DB_ArenaLevels("DOS2_Arena_G");
DB_ArenaLevels("DOS2_Arena_H");
DB_ArenaLevels("DOS2_Arena_I");
DB_ArenaLevels("DOS2_Arena_K");
DB_ArenaLevels("DOS2_Arena_J");
DB_ArenaLevels("DOS2_Arena_L");
DB_ArenaLevels("DOS2_Arena_M");
DB_ArenaLevels("DOS2_Arena_N");
DB_ArenaLevels("DOS2_Arena_O");
/*
DB_ArenaTeams(0);
DB_ArenaTeams(1);
DB_ArenaTeamNumberOfChampions(0,0);
DB_ArenaTeamNumberOfChampions(1,0);
DB_ArenaTeamChampions((CHARACTERGUID)CHARACTERGUID_ArenaTestPlayer1_006881c7-0f63-474d-9e49-77f43725f01e,0);
DB_ArenaTeamChampions(CHARACTERGUID_ArenaTestPlayer2_9e3af9d9-53cb-416c-a045-252c6275c458,0);
DB_ArenaTeamChampions(CHARACTERGUID_ArenaTestPlayer3_1333d81c-bcb1-44b9-8bfc-b3e4b4f2a042,0);
DB_ArenaTeamChampions(CHARACTERGUID_ArenaTestPlayer4_99d81628-5e92-43aa-8bd9-b1b7bce188d4,1);

Proc_ArenaSetupDeathmatch();
*/
KBSECTION
IF
TextEventSet("party")
AND
DB_ArenaDummy(_Dummy)
THEN
CharacterMakePlayer(_Dummy, NULL_00000000-0000-0000-0000-000000000000);
IterateUsers("ArenaEditorAssignPlayer");

PROC
Proc_GameModeStarted("Arena",(INTEGER)_)
AND
DB_ArenaCharacterToDelete((CHARACTERGUID)_Char)
THEN
CharacterMakeNPC(_Char);
CharacterRemoveFromParty(_Char);
SetOnStage(_Char,0);

 
IF
GameStarted(_Level,1)
AND
DB_ArenaLevels(_Level)
AND
DB_ArenaDummy(_Dummy)
THEN
CharacterMakePlayer(_Dummy, NULL_00000000-0000-0000-0000-000000000000);

IF
GameStarted(_Level,1)
AND
DB_ArenaLevels(_Level)
THEN
IterateUsers("ArenaEditorAssignPlayer");

IF
UserEvent(_User,"ArenaEditorAssignPlayer")
AND
DB_ArenaDummy(_Dummy)
THEN
CharacterAssignToUser(_User,_Dummy);

IF
CharacterCreatedInArena(_Champion,_TeamID)
THEN
DB_ArenaTeams(_TeamID);
DB_ArenaTeamChampions(_Champion,_TeamID);
Proc_ArenaIncreaseTeamSize(_TeamID);
Proc_ArenaReplenishChampionArmor(_Champion);

IF
OnArenaRoundStarted(_)
THEN
SetCameraDistanceOverride(25.0);

IF
OnArenaRoundStarted("DM")
THEN
Proc_ArenaSetupDeathmatch();

IF
OnArenaRoundStarted("CTA")
THEN
DB_ArenaClaimTheArtifactMatch(1);

IF
OnArenaRoundStarted("KTK")
THEN
Proc_ArenaSetupKillTheKing();

PROC
Proc_ArenaReplenishChampionArmor((CHARACTERGUID)_Champion)
THEN
CharacterSetArmorPercentage(_Champion,100.0);
CharacterSetMagicArmorPercentage(_Champion,100.0);


// Achievement for starting Arena Mode
IF
OnArenaRoundStarted(_)
THEN
UnlockAchievement("DOS2_Quest97",NULL_00000000-0000-0000-0000-000000000000);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "ArenaModWrapper"
